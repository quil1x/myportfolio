name: Deploy Flutter Web to GitHub Pages

on:
  push:
    branches:
      - main # –ê–±–æ —Ç–∞ –≥—ñ–ª–∫–∞, –∑ —è–∫–æ—ó —Ç–∏ —Ö–æ—á–µ—à –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, master)

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write # –î–æ–∑–≤—ñ–ª –Ω–∞ –∑–∞–ø–∏—Å, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏/–æ–Ω–æ–≤–∏—Ç–∏ –≥—ñ–ª–∫—É gh-pages

    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v4 # –ë–µ—Ä–µ —Ç–≤—ñ–π –∫–æ–¥ –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

      - name: Setup Flutter üê¶
        uses: subosito/flutter-action@v2 # –ù–∞–ª–∞—à—Ç–æ–≤—É—î Flutter
        with:
          channel: 'stable' # –ê–±–æ 'beta', 'dev', –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–≤–æ—ó—Ö –ø–æ—Ç—Ä–µ–±

      - name: Install dependencies üì¶
        run: flutter pub get # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ pubspec.yaml

      - name: Build web app üèóÔ∏è
        # –í–∞–∂–ª–∏–≤–æ: /myportfolio/ - —Ü–µ –Ω–∞–∑–≤–∞ —Ç–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é!
        run: flutter build web --release --base-href /myportfolio/

      - name: Deploy to GitHub Pages üöÄ
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø—É
          publish_dir: ./build/web # –ü–∞–ø–∫–∞, —è–∫—É –ø—É–±–ª—ñ–∫—É—î–º–æ
          # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—É–±–ª—ñ–∫—É—î —É –≥—ñ–ª–∫—É gh-pages
          # –ú–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ —ñ–Ω—à—É –≥—ñ–ª–∫—É, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:
          # publish_branch: gh-pages
          # –ú–æ–∂–Ω–∞ –ø—Ä–∏–º—É—Å–æ–≤–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –≥—ñ–ª–∫–∏ gh-pages:
          # force_orphan: true